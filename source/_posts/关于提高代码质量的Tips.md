---
title: 提高代码质量的Tips
date: 2020-05-24 22:34:48
categories: SystemDesign
tags:
top:
---
# 1. 如何重构

## 1.1 为什么要重构代码？
重构是一种对软件内部结构的改善，目的是在不改变软件的可见行为的情况下，使其更易理解，修改成本更低。

即 重构是指保持功能不变的前提下，利用设计思想、原则、模式和编程规范等理论来优化代码，修改设计上的不足，提高代码的质量。

如果没有维护，物体势必会往熵增加的方向去演变的。如果不做代码的维护，代码总归会往越来越混乱的方向演进，当混乱到一定程度，量变引起质变，项目的维护成本已经高过了重新开发一套新代码的成本，再去重构就会变得十分困难了。

## 1.2 重构的对象

+ 大型重构
    + 对顶层代码设计的重构
        + 包括 
            + 系统
            + 模块
            + 代码结构
            + 类与类之间的关系
        + 重构的手段
            + 分层
            + 模块化
            + 解耦
            + 抽象可复用的组件


+ 小型重构
    + 对于代码细节的重构
    + 针对类，函数，变量等代码级别的重构

## 1.3 什么时候重构？ 

持续重构的概念，即没事情的时候，看看项目中有哪些写得不够好，可以优化的代码，主动去重构一下。或者在修改添加某个功能代码的时候，也可以顺手把不符合编码规范，不好的设计重构一下。



# 2. 代码的可测试性

做重构，如何保证你做的改动能够按照既定的想法运行，那么我们需要来写单元测试，来保证新的代码仍然能够通过，即原有的逻辑的正确性没有被破坏。

另外，单元测试的阅读实际上是快速熟悉代码的一种方式

一些常见的Anti-patterns:

+ 未决行为
    + 代码的输出是随机的，或者不确定的
+ 全局变量
+ 静态方法
+ 复杂继承
+ 高耦合代码

# 3. 编程规范